<html>
  <title>PLP Camera Detect</title>
  <style media="screen">
    h1 {
      color: green;
      border-bottom: 2px solid green;
    }
    h2 {
      border-top: 3px solid black;
      border-bottom: 1px solid black;
    }
    em {
      color: #060;
    }
    body > ol:first-of-type {
      font-family: Monaco, Courier, monospace;
      background-color: #EEE;
      position: relative;
      padding-top: 2em;
      font-size: 0.8em;
    }
    body > ol:first-of-type::before {
      content:"Change Table";
      font-weight: bold;
      display: block;
      border-bottom: 1px dotted black;
      padding: 0.3em;
      position: absolute;
      top: 0;
      left:0;
      right:0;
      height: 1em;
    }
  </style>
  <body>
<h1>Camera Detect PLP</h1>

<ol>
<li>2015-12-21 Initial version</li>
</ol>

<h2>About</h2>

<p>Detects when the camera input is not useful for navigation. Implemented using histogram analysis on the camera's video signal.</p>

<h2>Values</h2>

<h3>Parameters</h3>

<ul>
<li><code>videoFeed</code> &larr; <code>/TO/BE/DECIDED</code> The camera video feed.</li>
</ul>

<h3>Constants</h3>

<ul>
<li><code>IDEAL_DISTRIBUTION</code> Ideal distribution of the pixels over the histogram bins in the video feed.</li>
<li><code>DEVIATION_THRESHOLD</code> Threshold of deviation from <code>IDEAL_DISTRIBUTION</code>, above which the PLP detects that the camera input is not useful.</li>
</ul>

<h3>Variables</h3>

<p><em>Calculated based on parameters and constants.</em></p>

<ul>
<li><code>currentHistorgram</code> Histogram of the current frame in the video feed</li>
</ul>

<h2>Natural Preconditions</h2>

<ul>
<li>Camera on</li>
</ul>

<h2>Detection Goal</h2>

<ul>
<li><code>abs( process(currentHistorgram) - process(IDEAL_DISTRIBUTION) ) &gt; DEVIATION_THRESHOLD</code></li>
</ul>

<h2>Probability of Successful Detection Given Condition</h2>

<ul>
<li><code>TBD</code>
<ul>
<li>The goal to be detected is over digital signal, so we can claim 100%. But what is the probability, given that the camera input is not useful, that the video signal still has an OK distribution?</li>
</ul></li>
</ul>

<h2>Application Context</h2>

<h3>Resources</h3>

<ul>
<li>Camera video feed (non-exclusive)</li>
</ul>

<h3>Preconditions</h3>

<ul>
<li><code>distanceToWaypoint &gt; 1m</code></li>
<li><code>positionError &lt; MIN_LOC_ERROR</code></li>
</ul>

<h3>Concurrency Conditions</h3>

<p><em>Later, we will replace this with "health" PLP for the entire system</em></p>

<ul>
<li><code>CAMERA_OK</code></li>
</ul>

<h3>Concurrent Modules</h3>

<ul>
<li>(none)</li>
</ul>

<h2>Side Effects</h2>

<ul>
<li>(none)</li>
</ul>

<h2>Robil Integration</h2>

<h3>Trigger</h3>

<ul>
<li>System on</li>
</ul>

<h3>Abort</h3>

<ul>
<li>(none)</li>
</ul>

<h3>Output</h3>

<ul>
<li>Alerts go to the <code>plp/messages</code> ROS topic.</li>
</ul>
</body>
</html>
